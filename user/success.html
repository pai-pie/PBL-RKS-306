<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Success - GuardianTix</title>
  <style>
    body { 
      font-family: 'Georgia', serif; 
      background: linear-gradient(135deg, #2E2A30 0%, #1a1a2e 100%); 
      color: #FDF6E3; 
      text-align: center; 
      margin: 0; 
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container { 
      max-width: 500px; 
      margin: 20px; 
      background: linear-gradient(145deg, #1a1a2e, #2E2A30);
      padding: 30px; 
      border-radius: 15px; 
      box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.5),
        0 0 25px rgba(255, 215, 0, 0.4);
      border: 2px solid #FFD700;
      position: relative;
    }

    .container::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #FFD700, #C73E3E, #C8A2C8, #FFD700);
      border-radius: 17px;
      z-index: -1;
      opacity: 0.3;
    }

    h1 { 
      color: #FFD700; 
      text-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
      margin-bottom: 20px;
      font-size: 2.2rem;
    }

    .success-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    .details { 
      margin: 25px 0; 
      font-size: 1.1rem; 
      padding: 20px;
      background: rgba(46, 42, 48, 0.7);
      border-radius: 10px;
      border: 1px solid #C8A2C8;
    }

    .details b {
      color: #FFD700;
    }

    .code { 
      font-size: 1.4rem; 
      font-weight: bold; 
      color: #FFD700; 
      margin: 25px 0; 
      padding: 15px;
      background: rgba(199, 62, 62, 0.1);
      border-radius: 10px;
      border: 2px solid #FFD700;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
      letter-spacing: 1px;
    }

    .buttons { 
      display: flex; 
      flex-direction: column; 
      gap: 15px; 
      margin-top: 25px; 
    }

    button { 
      padding: 14px 20px; 
      background: linear-gradient(135deg, #C73E3E, #A52A2A);
      border: 2px solid #FFD700;
      border-radius: 8px; 
      cursor: pointer; 
      font-size: 1rem; 
      font-weight: bold; 
      color: #FDF6E3;
      font-family: 'Georgia', serif;
      transition: all 0.3s ease;
    }

    button:hover { 
      background: linear-gradient(135deg, #FFD700, #D4AC0D);
      color: #2E2A30;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
    }

    .back { 
      background: linear-gradient(135deg, #C8A2C8, #9B59B6);
      border: 2px solid #FFD700;
    }

    .back:hover {
      background: linear-gradient(135deg, #FFD700, #D4AC0D);
      color: #2E2A30;
    }

    /* Magical sparkle effect */
    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #FFD700;
      border-radius: 50%;
      animation: sparkle 2s infinite;
    }

    @keyframes sparkle {
      0% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(0); }
    }

    /* Confetti effect container */
    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    /* Magical glow animation */
    @keyframes magicalGlow {
      0%, 100% { 
        box-shadow: 
          0 10px 30px rgba(0, 0, 0, 0.5),
          0 0 25px rgba(255, 215, 0, 0.4);
      }
      50% { 
        box-shadow: 
          0 10px 30px rgba(0, 0, 0, 0.5),
          0 0 35px rgba(255, 215, 0, 0.6);
      }
    }

    .container {
      animation: magicalGlow 3s ease-in-out infinite;
    }

    /* Celebration message */
    .celebration {
      color: #C8A2C8;
      font-size: 1rem;
      margin-top: 15px;
      font-style: italic;
    }

    /* Responsive design */
    @media (max-width: 480px) {
      .container {
        margin: 15px;
        padding: 20px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .code {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>

  <!-- Confetti container -->
  <div class="confetti" id="confetti"></div>

  <div class="container">
    <div class="success-icon">‚ú®</div>
    <h1>Magical Purchase Complete!</h1>
    
    <div class="celebration">Your enchanted tickets are ready!</div>
    
    <div class="details" id="ticketDetails"></div>
    <div class="code" id="bookingCode"></div>
    
    <div class="buttons">
      <button onclick="ticket.download()">üìú Download E-Ticket Scroll</button>
      <button class="back" onclick="ticket.goHome()">üè∞ Return to Great Hall</button>
    </div>
  </div>

  <script>
    class Ticket {
      constructor(ticketType, method){
        this.ticketType = ticketType;
        this.method = method;
        this.bookingCode = this.generateCode();
        this.showDetails();
        this.createConfetti();
      }

      generateCode(){
        const now = new Date();
        const datePart = now.getFullYear().toString().slice(-2) +
                         (now.getMonth()+1).toString().padStart(2,"0") +
                         now.getDate().toString().padStart(2,"0");
        const randomPart = Math.random().toString(36).substring(2,6).toUpperCase();
        return `MAGIC-${datePart}-${randomPart}`;
      }

      showDetails(){
        document.getElementById("ticketDetails").innerHTML = 
          `Ticket Type: <b>${this.ticketType}</b><br>Payment Method: <b>${this.method}</b>`;
        document.getElementById("bookingCode").innerText = `Enchantment Code: ${this.bookingCode}`;
      }

      createConfetti() {
        const confettiContainer = document.getElementById('confetti');
        const colors = ['#FFD700', '#C73E3E', '#C8A2C8', '#FDF6E3'];
        
        for (let i = 0; i < 50; i++) {
          const sparkle = document.createElement('div');
          sparkle.className = 'sparkle';
          sparkle.style.left = Math.random() * 100 + 'vw';
          sparkle.style.top = Math.random() * 100 + 'vh';
          sparkle.style.background = colors[Math.floor(Math.random() * colors.length)];
          sparkle.style.animationDelay = Math.random() * 2 + 's';
          sparkle.style.animationDuration = (1 + Math.random() * 2) + 's';
          confettiContainer.appendChild(sparkle);
        }
      }

      download(){
        const content = `‚ú® GuardianTix Magical E-Ticket ‚ú®
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Enchantment Code: ${this.bookingCode}
Ticket Type    : ${this.ticketType}
Payment Method : ${this.method}
Purchase Date  : ${new Date().toLocaleDateString()}

üé≠ The Mystic Symphony World Tour
   by Ethereal Orchestra

üìú IMPORTANT MAGICAL NOTES:
‚Ä¢ Present this scroll at the enchanted entrance
‚Ä¢ Keep your wand ready for verification
‚Ä¢ Arrive 30 minutes before the magical performance
‚Ä¢ No dark arts allowed in the venue

May your musical journey be truly magical! ‚ú®

"Where notes dance and spells enchant"`;
        
        const blob = new Blob([content], {type: "text/plain"});
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url; 
        a.download = `Magical-Ticket-${this.bookingCode}.txt`; 
        
        // Add magical download effect
        const button = document.querySelector('button');
        const originalText = button.textContent;
        button.textContent = 'üìú Casting Download Spell...';
        button.disabled = true;
        
        setTimeout(() => {
          a.click();
          URL.revokeObjectURL(url);
          button.textContent = originalText;
          button.disabled = false;
          
          // Show success message
          const celebration = document.querySelector('.celebration');
          celebration.textContent = '‚ú® E-Ticket scroll successfully downloaded!';
          celebration.style.color = '#FFD700';
        }, 1000);
      }

      goHome(){ 
        // Add magical transition effect
        document.body.style.opacity = '0.7';
        document.body.style.transition = 'opacity 0.5s ease';
        
        setTimeout(() => {
          window.location.href = "homepage.html";
        }, 500);
      }
    }

    const urlParams = new URLSearchParams(window.location.search);
    const ticketType = urlParams.get("ticket") || "Standard";
    const method = urlParams.get("method") || "Unknown";
    const ticket = new Ticket(ticketType, method);
  </script>

</body>
</html>